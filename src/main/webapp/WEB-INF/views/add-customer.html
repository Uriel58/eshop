<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title th:text="#{a.add_new_ustomer}">Add New Customer</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1 th:text="#{a.add_new_ustomer}">Add New Customer</h1>

        <!-- ✅ 確保不會傳遞 customerId -->
        <form th:action="@{/customers/save}" th:object="${customer}" method="post">
            
            <!-- ✅ 移除 hidden input，避免傳遞 ID -->
            
            <div class="mb-3">
                <label for="name" class="form-label" th:text="#{a.name}">Name <span class="text-danger">*</span></label>
                <input type="text" th:field="*{name}" class="form-control" id="name" 
                       placeholder="Enter name" required>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label" th:text="#{a.email}">Email <span class="text-danger">*</span></label>
                <input type="email" th:field="*{email}" class="form-control" id="email" 
                       placeholder="Enter email" required>
            </div>

            <div class="mb-3">
                <label for="telephone" class="form-label" th:text="#{a.telephone}">Telephone</label>
                <input type="text" th:field="*{telephone}" class="form-control" id="telephone"
                       pattern="0[0-9]{9}" title="電話號碼必須是以0開頭的10位數字" 
                       placeholder="0912345678">
            </div>

            <div class="mb-3">
                <label for="keyword" class="form-label" th:text="#{a.keyword}">Keyword</label>
                <input type="text" th:field="*{keyword}" class="form-control" id="keyword" readonly>
            </div>

            <div class="mb-3">
                <label for="age" class="form-label" th:text="#{a.age}">Age</label>
                <input type="number" th:field="*{age}" class="form-control" id="age" min="0" max="150">
            </div>

            <div class="mb-3">
                <label for="address" class="form-label" th:text="#{a.address}">Address</label>
                <select th:field="*{address}" class="form-control" id="address">
                    <option value="" th:text="#{a.select}">-- Select --</option>
                    <option value="台北市">台北市</option>
                    <option value="新北市">新北市</option>
                    <option value="台中市">台中市</option>
                    <option value="高雄市">高雄市</option>
                    <option value="台南市">台南市</option>
                    <option value="桃園市">桃園市</option>
                    <option value="新竹市">新竹市</option>
                    <option value="嘉義市">嘉義市</option>
                    <option value="基隆市">基隆市</option>
                    <option value="新竹縣">新竹縣</option>
                    <option value="苗栗縣">苗栗縣</option>
                    <option value="彰化縣">彰化縣</option>
                    <option value="南投縣">南投縣</option>
                    <option value="雲林縣">雲林縣</option>
                    <option value="嘉義縣">嘉義縣</option>
                    <option value="屏東縣">屏東縣</option>
                    <option value="宜蘭縣">宜蘭縣</option>
                    <option value="花蓮縣">花蓮縣</option>
                    <option value="台東縣">台東縣</option>
                    <option value="澎湖縣">澎湖縣</option>
                    <option value="金門縣">金門縣</option>
                    <option value="連江縣">連江縣</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="gender" class="form-label" th:text="#{a.gender}">Gender</label>
                <select th:field="*{gender}" class="form-control" id="gender">
                    <option value="" th:text="#{a.select}">-- Select --</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="userId" class="form-label" th:text="#{a.user}">User <span class="text-danger">*</span></label>
                <select th:field="*{user.id}" class="form-control" id="userId" required>
                    <option value="" th:text="#{a.select}">-- Select --</option>
                    <option th:each="u : ${users}" 
                            th:value="${u.id}"
                            th:text="${u.name + ' (' + u.email + ')'}">
                    </option>
                </select>
            </div>

            <button type="submit" class="btn btn-success" th:text="#{a.add}">add</button>
            <a th:href="@{/customers}" class="btn btn-secondary" th:text="#{a.cancel}">cancel</a>
        </form>
    </div>
</body>
</html>