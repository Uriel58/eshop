<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title th:text="#{a.product_details} + ${product.prodName}">Product
	Details</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<style>
.product-image-large {
	width: 100%;
	max-height: 500px;
	object-fit: contain;
}

.product-detail-label {
	font-weight: bold;
	margin-top: 10px;
}
</style>
</head>
<body>
	<!--Product詳細展示應有prod_tags,prod_name,prod_type(大類),prod_line(大類的細分),
    * prod_price(每3位數加,),prod_info(產品資訊),prod_images,prod_stock_qty
    * 而prod_images需展示大些（右半邊）
	-->
	<p th:if="${customer != null}">
		<span th:text="#{home.message} + ${customer.name}">Customer
			Name</span>
	</p>
	<p th:if="${customer == null}">
		<span th:text="#{home.message} + #{home.visitor}">Visitor</span>
	</p>
	<div class="container mt-5">
		<h2 th:text="${product.prodName}">Product Name</h2>
		<div class="row mt-4">
			<!-- 左半：圖片展示 -->
			<div class="col-md-6">
				<img class="product-image" th:if="${product.prodImages != null}"
					th:src="@{'/resources/images/' + ${product.prodImages}}"
					style="width: 300px; height: auto;" />
				<!-- alt="Product Image" -->
			</div>

			<!-- 右半：商品資訊 -->
			<div class="col-md-6 text-center">
				<p>
					<span class="product-detail-label" th:text="#{a.product_tag} +':'">Product
						Tag:</span> <span th:text="${product.prodTags}"></span>
				</p>
				<p>
					<span class="product-detail-label" th:text="#{a.prod_Type} +':'">Product
						Type:</span> <span th:text="${product.category.prodType}"></span>
				</p>
				<p>
					<span class="product-detail-label" th:text="#{a.prod_Line} +':'">Product
						Line:</span> <span th:text="${product.category.prodLine}"></span>
				</p>
				<p>
					<span class="product-detail-label" th:text="#{a.description} +':'">Product
						Description:</span> <span th:text="${product.category.description}"></span>
				</p>
				<p>
					<span class="product-detail-label" th:text="#{a.price} +':'">Price:</span>
					<span
						th:text="${#numbers.formatDecimal(product.prodPrice, 0, 'COMMA', 2, 'POINT')} + ' '+ #{a.dollar}">0
						dollar</span>
				</p>
				<p>
					<span class="product-detail-label"
						th:text="#{a.inventory_quantity} +':'">Inventory Quantity:</span>
					<span th:text="${product.prodStockQty}"></span>
				</p>
				<p>
					<span class="product-detail-label" th:text="#{a.product_info} +':'">Product
						Info:</span>
				</p>
				<p>
					<span th:text="${product.prodInfo}"></span>
				</p>
			</div>
		</div>



		<div class="mt-4">
			<!-- /*返回按鈕 */-->
			<a th:href="@{/}" class="btn btn-secondary" th:text="#{a.back}">back</a>

			<!-- 自動新增購物車的商品 -->
			<form th:if="${customer != null}"
				th:action="@{/cart/create-and-add-product}" method="post"
				class="d-inline">
				<input type="hidden" name="customerId"
					th:value="${customer.customerId}" /> <input type="hidden"
					name="productId" th:value="${product.prodNum}" /> <input
					type="hidden" name="quantity" value="1" /> <input type="hidden"
					name="price" th:value="${product.prodPrice}" />
				<button type="submit" class="btn btn-primary"
					th:text="#{a.add_to_cart}">Add to cart</button>
			</form>

			<!-- 尚未登入 -->
			<div th:if="${customer == null}">
				<p class="text-danger mt-3" th:text="#{a.login_to_add_cart}">Please
					log in before adding items to your cart.</p>
				<a th:href="@{/login}" class="btn btn-outline-primary mt-2"
					th:text="#{a.login}">Login</a>
			</div>
			<div th:if="${cartMessageKey}" class="alert mt-3"
				th:classappend="${cartMessageKey == 'cart.product_already_exists'} ? 'alert-warning' : 'alert-success'">
				<span th:text="#{${cartMessageKey}}">Message</span>
			</div>
		</div>
	</div>
</body>
</html>
